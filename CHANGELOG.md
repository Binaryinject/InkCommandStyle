# 更新日志

## [1.0.3] - 2025-01-20

### 修复
- 🔧 **重要修复**：修复打包配置导致所有功能失效的问题
- 修复 .vscodeignore 配置，确保只打包编译后的 out/ 目录
- 排除源代码 src/ 和 TypeScript 配置文件
- 确保大纲、预览面板、可视化面板等功能正常工作

---

## [1.0.2] - 2025-01-20

### 修复
- 修复安装后命令 'ink-command-style.preview' not found 的错误
- 修复 PreviewManager 的 extensionUri 初始化问题
- 改进扩展激活时的资源路径解析

---

## [1.0.1] - 2025-01-20

### 新增功能

#### 🎮 故事预览面板
- 实现完整的交互式故事预览功能
- 支持点击选项或按数字键（1-9）进行选择
- 自动识别并高亮显示 `角色: 对话` 格式
- 支持 Restart 和 Rewind 功能，快捷键 `Ctrl/Cmd + R` 和 `Ctrl/Cmd + Z`

#### 🎨 自定义命令增强
- 预览时自动隐藏 `@` 开头的自定义命令行
- 悬停在文本上显示自定义命令堆栈（紫色左侧竖线标识）
- 命令语法彩色高亮显示：
  - 命令名（如 `@setBackground`）- 蓝色加粗
  - 参数名（如 `image`）- 青色
  - 参数值（如 `forest.jpg`）- 橙色
- 支持多个命令的堆栈显示

#### 🔗 点击跳转源码
- 点击预览面板中的任意文本行跳转到编辑器对应位置
- 编辑器在后台打开，预览面板保持焦点
- 光标自动定位到行首，方便查看和编辑

#### ⚡ Live Update
- 保存文件时自动刷新预览
- 可通过工具栏 checkbox 开关 Live Update
- 支持 `INCLUDE` 指令的自动重新加载

#### 📁 INCLUDE 指令支持
- 完整支持 `INCLUDE filename.ink` 指令
- 自动解析和加载被包含的文件
- 编译错误时显示完整的文件路径信息

#### 🐛 错误处理改进
- 显示编译错误的详细信息和行号
- 错误按钮点击显示完整错误列表
- 区分错误、警告和信息三种级别

### 改进
- 优化预览面板的字体大小，与编辑器保持一致
- 改进对话高亮的视觉效果
- 优化自定义命令的视觉标识（从圆点改为竖线）

### 文档
- 更新 README 添加故事预览功能的详细说明
- 添加完整的使用示例和快捷键说明

---

## [1.0.0] - 2025-01-19

### 首次发布

#### ✨ 语法高亮
- 完整的 Ink 语法高亮支持
- 对话格式高亮（`角色: 对话内容`）
- 自定义命令高亮（`@命令 参数=值`）
- Knot 和 Stitch 定义高亮
- 跳转符号和目标高亮

#### 🖱️ 智能跳转
- Ctrl+点击或 F12 跳转到定义
- 支持 Knot 和 Stitch 的跳转
- 支持点分语法（如 `knot.stitch`）

#### 📊 可视化调试面板
- 树形展示脚本结构
- 列出所有选择项及其位置
- 显示统计信息
- 点击元素跳转到源代码
- 实时更新

#### 📋 大纲支持
- 在 VSCode 大纲视图中显示文件结构
- Knot 和 Stitch 的层级显示
- 支持快速跳转（Ctrl+Shift+O）

#### 🎯 文件关联
- 支持 `.ink` 和 `.ink2` 文件
- 自动识别 Ink 语言
